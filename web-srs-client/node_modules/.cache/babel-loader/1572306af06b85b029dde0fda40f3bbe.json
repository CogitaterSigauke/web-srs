{"ast":null,"code":"var _jsxFileName = \"/home/fr/projects/web-srs/web-srs-client/src/pages/home.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport FlashCard from '../components/FlashCard';\nimport { InputAdornment } from '@material-ui/core';\nimport index from './../index.css';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Module from '../components/Module';\nimport Button from '@material-ui/core/Button';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nclass home extends Component {\n  constructor() {\n    super();\n\n    this.getModules = () => {\n      axios.get(`/module`).then(res => {\n        this.setState({\n          modules: res.data\n        });\n      }).catch(err => {\n        console.log(\"Module Error\", err);\n      });\n    };\n\n    this.getCards = index => {\n      const cardIds = this.state.modules[index].cardIds;\n      axios.post(\"/card/cardIds\", {\n        cardIds\n      }).then(res => {\n        console.log(\"cards fetched\", res.data);\n        this.setState({\n          cards: res.data\n        });\n      }).catch(err => {\n        console.log(\"Card Error\", err);\n      });\n    };\n\n    this.handleForwardClick = () => {\n      this.setState({\n        index: (this.state.index + 1) % this.state.modules.length\n      });\n      this.getCards(this.state.index);\n    };\n\n    this.handleBackwardClick = () => {\n      this.setState({\n        index: this.modulo(this.state.index - 1, this.state.modules.length)\n      });\n      this.getCards(this.state.index);\n    };\n\n    this.handleSelectModule = () => {\n      this.setState({\n        isSelecting: !this.state.isSelecting\n      });\n    };\n\n    this.getCards = index => {\n      if (this.state.modules.length > index) {\n        const cardIds = this.state.modules[index].cardIds;\n        axios.post(\"/card/cardIds\", {\n          cardIds\n        }).then(res => {\n          console.log(\"cards fetched\", res.data);\n          this.setState({\n            cards: res.data\n          });\n          console.log(\"State \", this.state);\n        }).catch(err => {\n          console.log(\"Card Error\", err);\n        });\n      }\n    };\n\n    this.chooseModule = (e, y) => {\n      console.log(\"e.target.key  ===== : \", e);\n      console.log(\"y ===== : \", y);\n    };\n\n    this.state = {\n      cards: [],\n      name: \"\",\n      modules: [],\n      index: 0,\n      loaded: false,\n      isSelecting: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.location.state) {\n      this.setState({\n        name: this.props.location.state.name\n      });\n    }\n\n    axios.get(`/module`).then(res => {\n      this.setState({\n        modules: res.data\n      });\n      console.log(\"state: <<<<<<<<<<< \", this.state);\n\n      if (this.state.modules.length > 0) {\n        this.setState({\n          loaded: true\n        });\n      }\n\n      const cardIds = this.state.modules[0].cardIds;\n      axios.post(\"/card/cardIds\", {\n        cardIds\n      }).then(res => {\n        console.log(\"cards fetched\", res.data);\n        this.setState({\n          cards: res.data\n        });\n      }).catch(err => {\n        console.log(\"Card Error\", err);\n      });\n    }).catch(err => {\n      console.log(\"Module Error\", err);\n    });\n  }\n\n  modulo(n, m) {\n    return (n % m + m) % m;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, this.state.name), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: \"card-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      sm: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-selector\",\n      onClick: this.handleSelectModule,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 27\n      }\n    }, \"Select Module\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-selector-num\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mnumber\",\n      name: \"mnumber\",\n      placeholder: \"Module Number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-sticker\",\n      onClick: this.handleSelectModule,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, \"Module \", this.state.loaded && /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 31\n      }\n    }, this.state.modules[this.state.index].id)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-pop-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, this.state.isSelecting && /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 31\n      }\n    }, this.state.modules.map((module, i) => /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => this.chooseModule(i),\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(Module, {\n      module: module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    }))))), /*#__PURE__*/React.createElement(ArrowBackIosIcon, {\n      onClick: this.handleBackwardClick,\n      className: \"arrow-a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      sm: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, this.state.cards.map((card, i) => /*#__PURE__*/React.createElement(FlashCard, {\n      card: card,\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      sm: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(ArrowForwardIosIcon, {\n      onClick: this.handleForwardClick,\n      className: \"arrow-b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default home;","map":{"version":3,"sources":["/home/fr/projects/web-srs/web-srs-client/src/pages/home.js"],"names":["React","Component","axios","Card","CardContent","Grid","FlashCard","InputAdornment","index","ArrowBackIosIcon","ArrowForwardIosIcon","Module","Button","AppBar","Toolbar","home","constructor","getModules","get","then","res","setState","modules","data","catch","err","console","log","getCards","cardIds","state","post","cards","handleForwardClick","length","handleBackwardClick","modulo","handleSelectModule","isSelecting","chooseModule","e","y","name","loaded","componentDidMount","props","location","n","m","render","id","map","module","i","card"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport FlashCard from '../components/FlashCard';\nimport { InputAdornment } from '@material-ui/core';\nimport index from './../index.css';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Module from '../components/Module';\nimport Button from '@material-ui/core/Button';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nclass home extends Component {\n\n  constructor(){\n    super();\n    this.state = {\n      cards: [],\n      name: \"\",\n      modules: [],\n      index: 0,\n      loaded: false,\n      isSelecting: false\n    }\n    \n};\n\n  componentDidMount(){\n    if(this.props.location.state){\n      this.setState({\n        name: this.props.location.state.name\n      })\n    }\n\n    axios.get(`/module`)\n    .then(res => {\n      this.setState({\n        modules: res.data\n      })\n      console.log(\"state: <<<<<<<<<<< \", this.state);\n      if(this.state.modules.length > 0){\n        this.setState({\n          loaded: true\n        })\n      }\n      const cardIds = this.state.modules[0].cardIds;\n      axios.post(\"/card/cardIds\", {cardIds})\n      .then(res => {\n        console.log(\"cards fetched\", res.data);\n        this.setState({\n          cards: res.data\n        })\n       \n      }).catch((err) => {\n        console.log(\"Card Error\", err);\n      });\n\n    }).catch((err) => {\n      console.log(\"Module Error\", err);\n    })\n\n   \n   \n\n  }\n\n  getModules = () => {\n   \n    axios.get(`/module`)\n      .then(res => {\n        this.setState({\n          modules: res.data\n        })\n      }).catch((err) => {\n        console.log(\"Module Error\", err);\n      })\n  }\n\n  getCards = (index) => {\n\n    const cardIds = this.state.modules[index].cardIds;\n      axios.post(\"/card/cardIds\", {cardIds})\n      .then(res => {\n        console.log(\"cards fetched\", res.data);\n        this.setState({\n          cards: res.data\n        })\n       \n      }).catch((err) => {\n        console.log(\"Card Error\", err);\n      });\n\n  }\n  \n  handleForwardClick = () => {\n\n    this.setState({\n      index: (this.state.index + 1) % this.state.modules.length\n    });\n    this.getCards(this.state.index);\n\n  }\n  modulo(n, m){\n    return ((n % m) + m) % m ;\n  }\n  handleBackwardClick = () => {\n\n    this.setState({\n      index: this.modulo((this.state.index - 1), this.state.modules.length)\n    });\n    this.getCards(this.state.index);\n\n  }\n\n  handleSelectModule =  () => {\n    this.setState({\n      isSelecting: !this.state.isSelecting\n    })\n  }\n\n  getCards = (index) => {\n\n    if(this.state.modules.length > index){\n\n      const cardIds = this.state.modules[index].cardIds;\n      axios.post(\"/card/cardIds\", {cardIds})\n      .then(res => {\n        console.log(\"cards fetched\", res.data);\n        this.setState({\n          cards: res.data\n        })\n        console.log(\"State \", this.state)\n       \n      }).catch((err) => {\n        console.log(\"Card Error\", err);\n      });\n    }\n\n  }\n\n  chooseModule = (e, y) => {\n    console.log(\"e.target.key  ===== : \", e);\n    console.log(\"y ===== : \", y);\n  }\n    render() {\n        \n       return (\n                            \n              <div>\n                <br/>\n                <br/>\n                <br/>\n                <br/>\n                <h1>  \n                  {this.state.name}\n\n                </h1>\n                \n                <Grid container className=\"card-container\">                  \n                    <Grid item sm>\n\n                    <div className=\"module-selector\" onClick={this.handleSelectModule}>\n                          <span>\n                          Select Module  \n                          </span> \n                          \n                        </div>\n                        <div className=\"module-selector-num\">\n                          \n                         <form>\n                            <input type=\"text\" id=\"mnumber\" name=\"mnumber\" placeholder=\"Module Number\"/>\n                          </form>     \n                    \n                        </div>\n                        <div className=\"module-sticker\" onClick={this.handleSelectModule}>\n                            Module {this.state.loaded && \n                            (\n                              <span>\n                                {this.state.modules[this.state.index].id}                                                            \n                              </span>\n                            )} \n                          \n                        </div>\n                        <div className=\"module-pop-up\">\n                          {\n                            this.state.isSelecting && (\n                              <span>\n                                \n                                {this.state.modules.map((module, i) => (\n                                  <span onClick={() => this.chooseModule(i)} key={i}>      \n                                    <Module module={module} />\n                                  </span>\n                                                                      \n                                  ))}\n                                \n                                \n                              </span>\n                            )\n                          }\n                        \n                        </div>  \n\n\n                        \n                \n                      <ArrowBackIosIcon onClick={this.handleBackwardClick} className=\"arrow-a\"/>\n                    </Grid>\n                    <Grid item sm>\n                      \n                      {this.state.cards.map((card, i) =>(                        \n                        <FlashCard card={card} key={i}/>                      \n                      )  \n                      )} \n                    </Grid>  \n                      <Grid item sm>\n                        <ArrowForwardIosIcon onClick={this.handleForwardClick} className=\"arrow-b\"/>\n                      </Grid>\n                </Grid>\n             </div>\n          \n        );\n    }\n}\nexport default home;\n\n"]},"metadata":{},"sourceType":"module"}